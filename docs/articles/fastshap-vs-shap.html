<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>fastshap-vs-shap • fastshap</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="fastshap-vs-shap">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fastshap</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/fastshap.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/example-titanic.html">Titanic: Machine Learning from Disaster</a>
    </li>
    <li>
      <a href="../articles/fastshap-vs-iml-iBreakDown.html">fastshap-vs-iml-iBreakDown</a>
    </li>
    <li>
      <a href="../articles/fastshap-vs-shap.html">fastshap-vs-shap</a>
    </li>
    <li>
      <a href="../articles/forceplot.html">Visualizing Prediction Explanations with Force Plots</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bgreenwell/fastshap">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>fastshap-vs-shap</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/bgreenwell/fastshap/blob/master/vignettes/fastshap-vs-shap.Rmd"><code>vignettes/fastshap-vs-shap.Rmd</code></a></small>
      <div class="hidden name"><code>fastshap-vs-shap.Rmd</code></div>

    </div>

    
    
<p>In this vignette we compare <a href="https://github.com/bgreenwell/fastshap">fastshap</a> with the <a href="https://github.com/slundberg/shap">shap</a> Python module. In particular, we’ll compare <code><a href="../reference/explain.html">fastshap::explain()</a></code> with the <code>shap.SamplingExplainer()</code> method which provides the same Monte Carlo approach to computing ApproxSHAP (ApproxSHAP) values described in <span class="citation">Štrumbelj and Kononenko (2014)</span>; in particular, see <strong>Algorithm 1</strong>. We’ll also compare <code><a href="../reference/explain.html">fastshap::explain()</a></code> with the results from <code>shap.TreeExplainer()</code> which produces exact Shapley (ExactSHAP or TreeSHAP if referring specifically to the implementation for tree-based models) values for a wide variety of tree-based models in Python <span class="citation">(Lundberg et al. 2019)</span>. The comparisons will be made on a random forest trained to the Boston housing data set (the data are available in the <code>notebooks/data</code> directory within this repository).</p>
<div id="tldr" class="section level2">
<h2 class="hasAnchor">
<a href="#tldr" class="anchor"></a>TL;DR</h2>
<ul>
<li><p>The <a href="https://github.com/slundberg/shap">shap</a> library treats the specified number of Monte Carlo repetitions as a total and distributes them across the feature columns according to variance (features with higher variance get more of the total). There does not seem to be any way to override this; to me, this is confusing and not optimal in all cases. <a href="https://github.com/bgreenwell/fastshap">fastshap</a> on the other hand, uses the same number of Monte Carlo repetitions on all columns (though, this can be wasteful compared to <a href="https://github.com/slundberg/shap">shap</a>’s approach). Hence, it is difficult to compare the actual computation time between the two packages in a fair way.</p></li>
<li><p>TreeSHAP (provided by <code>shap.TreeExplainer()</code>) does not scale well with tree depth and will likely take longer than <a href="https://github.com/bgreenwell/fastshap">fastshap</a>’s fast Monte Carlo approach for bagged decision trees and random forests (where trees are intentionally grown deep).</p></li>
<li><p><a href="https://github.com/bgreenwell/fastshap">fastshap</a> is quicker compared to most other implementations of ApproxSHAP because it makes far less calls to the underlying prediction function by working on an entire column of ApproxSHAP values at a time. It’s also partially written in C++ and makes efficient use of logical subsetting.</p></li>
</ul>
</div>
<div id="fastshap" class="section level2">
<h2 class="hasAnchor">
<a href="#fastshap" class="anchor"></a>fastshap</h2>
<p>To start, we’ll load all the required packages and prep the Boston housing data:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># Load required packages</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(fastshap)  <span class="co"># for explain() function</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)   <span class="co"># for autoplot() function</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ranger)    <span class="co"># for efficiently fitting random forests</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co"># Set up the Boston housing data</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7">boston &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span>(<span class="st">"data/boston.csv"</span>)</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">X &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.matrix.html">data.matrix</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(boston, <span class="dt">select =</span> <span class="op">-</span>cmedv))</a></code></pre></div>
<p>Next, we train a random forest and create a simple prediction wrapper to be used by <code><a href="../reference/explain.html">explain()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Train a random forest</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">944</span>)  <span class="co"># for reproducibility</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">(rfo &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/ranger/man/ranger.html">ranger</a></span>(cmedv <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> boston))</a></code></pre></div>
<pre><code>## Ranger result
## 
## Call:
##  ranger(cmedv ~ ., data = boston) 
## 
## Type:                             Regression 
## Number of trees:                  500 
## Sample size:                      506 
## Number of independent variables:  15 
## Mtry:                             3 
## Target node size:                 5 
## Variable importance mode:         none 
## Splitrule:                        variance 
## OOB prediction error (MSE):       10.0957 
## R squared (OOB):                  0.8802584</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># Prediction wrappers</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">pfun &lt;-<span class="st"> </span><span class="cf">function</span>(object, newdata) {</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">  <span class="kw"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(object, <span class="dt">data =</span> newdata)<span class="op">$</span>predictions</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">}</a></code></pre></div>
<p>Finally, we compute ApproxSHAP values for all 506 training observations using the <code><a href="../reference/explain.html">fastshap::explain()</a></code> function with <span class="math inline">\(B = 50\)</span> Monte Carlo repetitions, and plot a summary of the results:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Comput ApproxSHAP values</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">945</span>)  <span class="co"># for reproducibility</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">t1 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span>(  <span class="co"># time the results</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">  res_fastshap &lt;-<span class="st"> </span><span class="kw"><a href="../reference/explain.html">explain</a></span>(rfo, <span class="dt">X =</span> X, <span class="dt">nsim =</span> <span class="dv">100</span>, <span class="dt">pred_wrapper =</span> pfun)</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co"># Print results</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8">res_fastshap</a></code></pre></div>
<pre><code>## # A tibble: 506 x 15
##       lon      lat   crim       zn   indus    chas    nox     rm     age     dis
##     &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1 -0.981  0.117   0.146   9.53e-2  0.911  -0.0464 0.0861  0.243 -0.0629  0.0564
##  2 -0.990 -0.00541 0.311  -4.86e-2 -0.164  -0.0393 0.366  -1.19  -0.131  -0.166 
##  3 -0.720  0.0823  0.375  -2.06e-2 -0.0963 -0.0649 0.560   4.62   0.226  -0.171 
##  4 -0.757  0.0128  0.305  -1.27e-2  0.908  -0.0228 0.512   4.04   0.287  -0.0974
##  5 -0.492  0.115   0.410  -3.19e-2  1.49   -0.0331 0.704   4.74   0.387  -0.0948
##  6 -0.545  0.106   0.146   9.18e-4  1.35   -0.0211 0.460  -0.892  0.218  -0.0176
##  7 -0.766  0.215   0.491  -2.86e-2 -0.193  -0.0103 0.216  -1.66   0.351   0.126 
##  8 -0.908  0.110   0.507  -3.86e-2 -0.278  -0.0438 0.230  -0.900 -0.335   0.0982
##  9 -1.03  -0.174   0.0475 -3.91e-2 -0.317  -0.0468 0.365  -2.11  -0.551  -0.118 
## 10 -0.847 -0.0943  0.280  -5.52e-2 -0.219  -0.0445 0.319  -0.995 -0.214  -0.177 
## # … with 496 more rows, and 5 more variables: rad &lt;dbl&gt;, tax &lt;dbl&gt;,
## #   ptratio &lt;dbl&gt;, b &lt;dbl&gt;, lstat &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Plot results</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(res_fastshap)</a></code></pre></div>
<p><img src="fastshap-vs-shap_files/figure-html/r-fastshap-1.png" width="100%" style="display: block; margin: auto auto auto 0;"></p>
</div>
<div id="shap" class="section level2">
<h2 class="hasAnchor">
<a href="#shap" class="anchor"></a>shap</h2>
<p>First we import the required modules and prep the <a href="https://www.rdocumentation.org/packages/pdp/versions/0.7.0/topics/boston">Boston housing data</a> (which we assume are available in <code>data/boston.csv</code>):</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="im">import</span> logging</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="im">import</span> pandas <span class="im">as</span> pd</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="im">import</span> sklearn</a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="im">import</span> shap</a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="im">import</span> time</a>
<a class="sourceLine" id="cb8-6" data-line-number="6"></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co"># Ignore basic logging info from shap</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9">log <span class="op">=</span> logging.getLogger(<span class="st">"shap"</span>)</a>
<a class="sourceLine" id="cb8-10" data-line-number="10">log.setLevel(logging.ERROR)</a>
<a class="sourceLine" id="cb8-11" data-line-number="11"></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co"># Set up the BOston housing data</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13">boston <span class="op">=</span> pd.read_csv(<span class="st">"data/boston.csv"</span>)</a>
<a class="sourceLine" id="cb8-14" data-line-number="14">X <span class="op">=</span> boston.drop(<span class="st">"cmedv"</span>, axis<span class="op">=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb8-15" data-line-number="15">y <span class="op">=</span> boston.cmedv</a></code></pre></div>
<p>Next, we train a random forest to the Boston housing data:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># Train a random forest</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">rfo <span class="op">=</span> sklearn.ensemble.RandomForestRegressor(n_estimators<span class="op">=</span><span class="dv">500</span>, oob_score<span class="op">=</span><span class="va">True</span>, random_state<span class="op">=</span><span class="dv">822</span>)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">rfo.fit(X, y)</a></code></pre></div>
<pre><code>## RandomForestRegressor(bootstrap=True, criterion='mse', max_depth=None,
##            max_features='auto', max_leaf_nodes=None,
##            min_impurity_decrease=0.0, min_impurity_split=None,
##            min_samples_leaf=1, min_samples_split=2,
##            min_weight_fraction_leaf=0.0, n_estimators=500, n_jobs=1,
##            oob_score=True, random_state=822, verbose=0, warm_start=False)</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb11-1" data-line-number="1">rfo.oob_score_  <span class="co"># print OOB score</span></a></code></pre></div>
<pre><code>## 0.8857754578188167</code></pre>
<p>Finally, we compute approximate and exact Shapley values for all 506 training observations using the <code>shap.SamplingExplainer()</code> and <code>shap.TreeExplainer()</code> methods; for the sampling approach, we use <span class="math inline">\(B = 100\)</span> Monte Carlo repetitions (<strong>Note:</strong> while we specify 100 Monte Carlo repetitions be used, this numb)er, as far as I can tell, represents the total number of repetitions to use across all the features. It appears that <a href="https://github.com/slundberg/shap">shap</a> will divvy up the specified number of repetitions across the features according to variance.):</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># Initialize explainer</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">rfo_explainer_sampling <span class="op">=</span> shap.SamplingExplainer(rfo.predict, X)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3">rfo_explainer_tree <span class="op">=</span> shap.TreeExplainer(rfo)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4"></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co"># Compute ApproxSHAP values and time the results</span></a></code></pre></div>
<pre><code>## Setting feature_perturbation = "tree_path_dependent" because no background data was given.</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb15-1" data-line-number="1">start <span class="op">=</span> time.time()</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">res_shap_samp <span class="op">=</span> rfo_explainer_sampling.shap_values(X, nsamples<span class="op">=</span><span class="dv">100</span>)</a></code></pre></div>
<pre><code>## 
  0%|          | 0/506 [00:00&lt;?, ?it/s]
  0%|          | 1/506 [00:00&lt;02:17,  3.67it/s]
  0%|          | 2/506 [00:00&lt;02:19,  3.61it/s]
  1%|          | 3/506 [00:00&lt;02:19,  3.62it/s]
  1%|          | 4/506 [00:01&lt;02:25,  3.44it/s]
  1%|          | 5/506 [00:01&lt;02:23,  3.49it/s]
  1%|1         | 6/506 [00:01&lt;02:21,  3.53it/s]
  1%|1         | 7/506 [00:02&lt;02:26,  3.42it/s]
  2%|1         | 8/506 [00:02&lt;02:23,  3.47it/s]
  2%|1         | 9/506 [00:02&lt;02:21,  3.50it/s]
  2%|1         | 10/506 [00:02&lt;02:20,  3.53it/s]
  2%|2         | 11/506 [00:03&lt;02:19,  3.56it/s]
  2%|2         | 12/506 [00:03&lt;02:18,  3.57it/s]
  3%|2         | 13/506 [00:03&lt;02:18,  3.56it/s]
  3%|2         | 14/506 [00:03&lt;02:18,  3.56it/s]
  3%|2         | 15/506 [00:04&lt;02:17,  3.58it/s]
  3%|3         | 16/506 [00:04&lt;02:15,  3.62it/s]
  3%|3         | 17/506 [00:04&lt;02:14,  3.63it/s]
  4%|3         | 18/506 [00:05&lt;02:13,  3.64it/s]
  4%|3         | 19/506 [00:05&lt;02:13,  3.65it/s]
  4%|3         | 20/506 [00:05&lt;02:13,  3.65it/s]
  4%|4         | 21/506 [00:05&lt;02:12,  3.66it/s]
  4%|4         | 22/506 [00:06&lt;02:16,  3.55it/s]
  5%|4         | 23/506 [00:06&lt;02:14,  3.60it/s]
  5%|4         | 24/506 [00:06&lt;02:13,  3.61it/s]
  5%|4         | 25/506 [00:07&lt;02:12,  3.64it/s]
  5%|5         | 26/506 [00:07&lt;02:11,  3.64it/s]
  5%|5         | 27/506 [00:07&lt;02:11,  3.65it/s]
  6%|5         | 28/506 [00:07&lt;02:11,  3.63it/s]
  6%|5         | 29/506 [00:08&lt;02:15,  3.52it/s]
  6%|5         | 30/506 [00:08&lt;02:13,  3.57it/s]
  6%|6         | 31/506 [00:08&lt;02:12,  3.58it/s]
  6%|6         | 32/506 [00:08&lt;02:12,  3.58it/s]
  7%|6         | 33/506 [00:09&lt;02:11,  3.61it/s]
  7%|6         | 34/506 [00:09&lt;02:09,  3.63it/s]
  7%|6         | 35/506 [00:09&lt;02:09,  3.63it/s]
  7%|7         | 36/506 [00:10&lt;02:09,  3.64it/s]
  7%|7         | 37/506 [00:10&lt;02:08,  3.65it/s]
  8%|7         | 38/506 [00:10&lt;02:07,  3.66it/s]
  8%|7         | 39/506 [00:10&lt;02:07,  3.66it/s]
  8%|7         | 40/506 [00:11&lt;02:07,  3.66it/s]
  8%|8         | 41/506 [00:11&lt;02:06,  3.68it/s]
  8%|8         | 42/506 [00:11&lt;02:06,  3.68it/s]
  8%|8         | 43/506 [00:11&lt;02:05,  3.69it/s]
  9%|8         | 44/506 [00:12&lt;02:09,  3.57it/s]
  9%|8         | 45/506 [00:12&lt;02:09,  3.55it/s]
  9%|9         | 46/506 [00:12&lt;02:10,  3.54it/s]
  9%|9         | 47/506 [00:13&lt;02:09,  3.55it/s]
  9%|9         | 48/506 [00:13&lt;02:08,  3.56it/s]
 10%|9         | 49/506 [00:13&lt;02:08,  3.57it/s]
 10%|9         | 50/506 [00:13&lt;02:08,  3.55it/s]
 10%|#         | 51/506 [00:14&lt;02:08,  3.54it/s]
 10%|#         | 52/506 [00:14&lt;02:12,  3.43it/s]
 10%|#         | 53/506 [00:14&lt;02:10,  3.47it/s]
 11%|#         | 54/506 [00:15&lt;02:08,  3.51it/s]
 11%|#         | 55/506 [00:15&lt;02:07,  3.55it/s]
 11%|#1        | 56/506 [00:15&lt;02:06,  3.55it/s]
 11%|#1        | 57/506 [00:15&lt;02:07,  3.52it/s]
 11%|#1        | 58/506 [00:16&lt;02:07,  3.52it/s]
 12%|#1        | 59/506 [00:16&lt;02:05,  3.55it/s]
 12%|#1        | 60/506 [00:16&lt;02:05,  3.55it/s]
 12%|#2        | 61/506 [00:17&lt;02:05,  3.56it/s]
 12%|#2        | 62/506 [00:17&lt;02:04,  3.56it/s]
 12%|#2        | 63/506 [00:17&lt;02:04,  3.55it/s]
 13%|#2        | 64/506 [00:17&lt;02:03,  3.57it/s]
 13%|#2        | 65/506 [00:18&lt;02:03,  3.57it/s]
 13%|#3        | 66/506 [00:18&lt;02:02,  3.58it/s]
 13%|#3        | 67/506 [00:18&lt;02:06,  3.48it/s]
 13%|#3        | 68/506 [00:19&lt;02:03,  3.54it/s]
 14%|#3        | 69/506 [00:19&lt;02:01,  3.59it/s]
 14%|#3        | 70/506 [00:19&lt;02:00,  3.61it/s]
 14%|#4        | 71/506 [00:19&lt;01:59,  3.64it/s]
 14%|#4        | 72/506 [00:20&lt;01:59,  3.64it/s]
 14%|#4        | 73/506 [00:20&lt;01:57,  3.67it/s]
 15%|#4        | 74/506 [00:20&lt;01:57,  3.68it/s]
 15%|#4        | 75/506 [00:20&lt;02:00,  3.56it/s]
 15%|#5        | 76/506 [00:21&lt;01:59,  3.60it/s]
 15%|#5        | 77/506 [00:21&lt;01:58,  3.63it/s]
 15%|#5        | 78/506 [00:21&lt;01:57,  3.63it/s]
 16%|#5        | 79/506 [00:22&lt;01:57,  3.65it/s]
 16%|#5        | 80/506 [00:22&lt;01:56,  3.66it/s]
 16%|#6        | 81/506 [00:22&lt;01:55,  3.68it/s]
 16%|#6        | 82/506 [00:22&lt;01:54,  3.69it/s]
 16%|#6        | 83/506 [00:23&lt;01:54,  3.69it/s]
 17%|#6        | 84/506 [00:23&lt;01:53,  3.70it/s]
 17%|#6        | 85/506 [00:23&lt;01:54,  3.69it/s]
 17%|#6        | 86/506 [00:23&lt;01:53,  3.69it/s]
 17%|#7        | 87/506 [00:24&lt;01:54,  3.66it/s]
 17%|#7        | 88/506 [00:24&lt;01:53,  3.68it/s]
 18%|#7        | 89/506 [00:24&lt;02:03,  3.37it/s]
 18%|#7        | 90/506 [00:25&lt;02:00,  3.45it/s]
 18%|#7        | 91/506 [00:25&lt;01:58,  3.50it/s]
 18%|#8        | 92/506 [00:25&lt;01:57,  3.53it/s]
 18%|#8        | 93/506 [00:25&lt;01:55,  3.58it/s]
 19%|#8        | 94/506 [00:26&lt;01:54,  3.61it/s]
 19%|#8        | 95/506 [00:26&lt;01:52,  3.64it/s]
 19%|#8        | 96/506 [00:26&lt;01:52,  3.65it/s]
 19%|#9        | 97/506 [00:27&lt;01:55,  3.54it/s]
 19%|#9        | 98/506 [00:27&lt;01:53,  3.60it/s]
 20%|#9        | 99/506 [00:27&lt;01:52,  3.62it/s]
 20%|#9        | 100/506 [00:27&lt;01:51,  3.64it/s]
 20%|#9        | 101/506 [00:28&lt;01:52,  3.61it/s]
 20%|##        | 102/506 [00:28&lt;01:51,  3.62it/s]
 20%|##        | 103/506 [00:28&lt;01:50,  3.63it/s]
 21%|##        | 104/506 [00:28&lt;01:50,  3.65it/s]
 21%|##        | 105/506 [00:29&lt;01:49,  3.65it/s]
 21%|##        | 106/506 [00:29&lt;01:48,  3.68it/s]
 21%|##1       | 107/506 [00:29&lt;01:48,  3.68it/s]
 21%|##1       | 108/506 [00:30&lt;01:48,  3.67it/s]
 22%|##1       | 109/506 [00:30&lt;01:48,  3.66it/s]
 22%|##1       | 110/506 [00:30&lt;01:49,  3.61it/s]
 22%|##1       | 111/506 [00:30&lt;01:50,  3.57it/s]
 22%|##2       | 112/506 [00:31&lt;01:53,  3.46it/s]
 22%|##2       | 113/506 [00:31&lt;01:52,  3.49it/s]
 23%|##2       | 114/506 [00:31&lt;01:51,  3.51it/s]
 23%|##2       | 115/506 [00:32&lt;01:50,  3.53it/s]
 23%|##2       | 116/506 [00:32&lt;01:49,  3.55it/s]
 23%|##3       | 117/506 [00:32&lt;01:49,  3.56it/s]
 23%|##3       | 118/506 [00:32&lt;01:49,  3.55it/s]
 24%|##3       | 119/506 [00:33&lt;01:48,  3.57it/s]
 24%|##3       | 120/506 [00:33&lt;01:51,  3.45it/s]
 24%|##3       | 121/506 [00:33&lt;01:49,  3.50it/s]
 24%|##4       | 122/506 [00:34&lt;01:49,  3.52it/s]
 24%|##4       | 123/506 [00:34&lt;01:48,  3.53it/s]
 25%|##4       | 124/506 [00:34&lt;01:47,  3.54it/s]
 25%|##4       | 125/506 [00:34&lt;01:47,  3.55it/s]
 25%|##4       | 126/506 [00:35&lt;01:46,  3.56it/s]
 25%|##5       | 127/506 [00:35&lt;01:45,  3.59it/s]
 25%|##5       | 128/506 [00:35&lt;01:45,  3.58it/s]
 25%|##5       | 129/506 [00:35&lt;01:45,  3.58it/s]
 26%|##5       | 130/506 [00:36&lt;01:45,  3.56it/s]
 26%|##5       | 131/506 [00:36&lt;01:47,  3.50it/s]
 26%|##6       | 132/506 [00:36&lt;01:47,  3.49it/s]
 26%|##6       | 133/506 [00:37&lt;01:47,  3.47it/s]
 26%|##6       | 134/506 [00:37&lt;01:50,  3.36it/s]
 27%|##6       | 135/506 [00:37&lt;02:01,  3.05it/s]
 27%|##6       | 136/506 [00:38&lt;02:02,  3.02it/s]
 27%|##7       | 137/506 [00:38&lt;01:57,  3.15it/s]
 27%|##7       | 138/506 [00:38&lt;02:04,  2.96it/s]
 27%|##7       | 139/506 [00:39&lt;01:59,  3.07it/s]
 28%|##7       | 140/506 [00:39&lt;01:54,  3.20it/s]
 28%|##7       | 141/506 [00:39&lt;01:50,  3.30it/s]
 28%|##8       | 142/506 [00:40&lt;01:52,  3.25it/s]
 28%|##8       | 143/506 [00:40&lt;01:49,  3.32it/s]
 28%|##8       | 144/506 [00:40&lt;01:46,  3.39it/s]
 29%|##8       | 145/506 [00:40&lt;01:47,  3.35it/s]
 29%|##8       | 146/506 [00:41&lt;01:46,  3.38it/s]
 29%|##9       | 147/506 [00:41&lt;01:45,  3.39it/s]
 29%|##9       | 148/506 [00:41&lt;01:45,  3.41it/s]
 29%|##9       | 149/506 [00:42&lt;01:43,  3.46it/s]
 30%|##9       | 150/506 [00:42&lt;01:41,  3.50it/s]
 30%|##9       | 151/506 [00:42&lt;01:41,  3.51it/s]
 30%|###       | 152/506 [00:42&lt;01:40,  3.52it/s]
 30%|###       | 153/506 [00:43&lt;01:39,  3.54it/s]
 30%|###       | 154/506 [00:43&lt;01:38,  3.57it/s]
 31%|###       | 155/506 [00:43&lt;01:38,  3.57it/s]
 31%|###       | 156/506 [00:44&lt;01:37,  3.58it/s]
 31%|###1      | 157/506 [00:44&lt;01:40,  3.48it/s]
 31%|###1      | 158/506 [00:44&lt;01:39,  3.51it/s]
 31%|###1      | 159/506 [00:44&lt;01:38,  3.52it/s]
 32%|###1      | 160/506 [00:45&lt;01:37,  3.55it/s]
 32%|###1      | 161/506 [00:45&lt;01:36,  3.57it/s]
 32%|###2      | 162/506 [00:45&lt;01:36,  3.57it/s]
 32%|###2      | 163/506 [00:46&lt;01:36,  3.57it/s]
 32%|###2      | 164/506 [00:46&lt;01:35,  3.58it/s]
 33%|###2      | 165/506 [00:46&lt;01:38,  3.46it/s]
 33%|###2      | 166/506 [00:46&lt;01:37,  3.50it/s]
 33%|###3      | 167/506 [00:47&lt;01:35,  3.54it/s]
 33%|###3      | 168/506 [00:47&lt;01:34,  3.56it/s]
 33%|###3      | 169/506 [00:47&lt;01:34,  3.57it/s]
 34%|###3      | 170/506 [00:47&lt;01:33,  3.59it/s]
 34%|###3      | 171/506 [00:48&lt;01:33,  3.60it/s]
 34%|###3      | 172/506 [00:48&lt;01:32,  3.60it/s]
 34%|###4      | 173/506 [00:48&lt;01:32,  3.60it/s]
 34%|###4      | 174/506 [00:49&lt;01:31,  3.61it/s]
 35%|###4      | 175/506 [00:49&lt;01:31,  3.62it/s]
 35%|###4      | 176/506 [00:49&lt;01:31,  3.60it/s]
 35%|###4      | 177/506 [00:49&lt;01:31,  3.59it/s]
 35%|###5      | 178/506 [00:50&lt;01:31,  3.58it/s]
 35%|###5      | 179/506 [00:50&lt;01:33,  3.50it/s]
 36%|###5      | 180/506 [00:50&lt;01:32,  3.54it/s]
 36%|###5      | 181/506 [00:51&lt;01:30,  3.57it/s]
 36%|###5      | 182/506 [00:51&lt;01:29,  3.60it/s]
 36%|###6      | 183/506 [00:51&lt;01:29,  3.61it/s]
 36%|###6      | 184/506 [00:51&lt;01:29,  3.61it/s]
 37%|###6      | 185/506 [00:52&lt;01:28,  3.61it/s]
 37%|###6      | 186/506 [00:52&lt;01:28,  3.62it/s]
 37%|###6      | 187/506 [00:52&lt;01:30,  3.52it/s]
 37%|###7      | 188/506 [00:53&lt;01:29,  3.55it/s]
 37%|###7      | 189/506 [00:53&lt;01:28,  3.58it/s]
 38%|###7      | 190/506 [00:53&lt;01:27,  3.61it/s]
 38%|###7      | 191/506 [00:53&lt;01:27,  3.62it/s]
 38%|###7      | 192/506 [00:54&lt;01:26,  3.63it/s]
 38%|###8      | 193/506 [00:54&lt;01:25,  3.64it/s]
 38%|###8      | 194/506 [00:54&lt;01:25,  3.63it/s]
 39%|###8      | 195/506 [00:54&lt;01:25,  3.64it/s]
 39%|###8      | 196/506 [00:55&lt;01:24,  3.66it/s]
 39%|###8      | 197/506 [00:55&lt;01:24,  3.64it/s]
 39%|###9      | 198/506 [00:55&lt;01:24,  3.64it/s]
 39%|###9      | 199/506 [00:56&lt;01:25,  3.61it/s]
 40%|###9      | 200/506 [00:56&lt;01:24,  3.60it/s]
 40%|###9      | 201/506 [00:56&lt;01:24,  3.60it/s]
 40%|###9      | 202/506 [00:56&lt;01:27,  3.48it/s]
 40%|####      | 203/506 [00:57&lt;01:26,  3.51it/s]
 40%|####      | 204/506 [00:57&lt;01:25,  3.54it/s]
 41%|####      | 205/506 [00:57&lt;01:24,  3.57it/s]
 41%|####      | 206/506 [00:58&lt;01:25,  3.53it/s]
 41%|####      | 207/506 [00:58&lt;01:24,  3.55it/s]
 41%|####1     | 208/506 [00:58&lt;01:23,  3.59it/s]
 41%|####1     | 209/506 [00:58&lt;01:22,  3.59it/s]
 42%|####1     | 210/506 [00:59&lt;01:24,  3.50it/s]
 42%|####1     | 211/506 [00:59&lt;01:23,  3.55it/s]
 42%|####1     | 212/506 [00:59&lt;01:22,  3.56it/s]
 42%|####2     | 213/506 [00:59&lt;01:21,  3.58it/s]
 42%|####2     | 214/506 [01:00&lt;01:21,  3.58it/s]
 42%|####2     | 215/506 [01:00&lt;01:21,  3.55it/s]
 43%|####2     | 216/506 [01:00&lt;01:22,  3.53it/s]
 43%|####2     | 217/506 [01:01&lt;01:21,  3.53it/s]
 43%|####3     | 218/506 [01:01&lt;01:24,  3.41it/s]
 43%|####3     | 219/506 [01:01&lt;01:23,  3.45it/s]
 43%|####3     | 220/506 [01:02&lt;01:24,  3.37it/s]
 44%|####3     | 221/506 [01:02&lt;01:23,  3.40it/s]
 44%|####3     | 222/506 [01:02&lt;01:22,  3.44it/s]
 44%|####4     | 223/506 [01:02&lt;01:21,  3.48it/s]
 44%|####4     | 224/506 [01:03&lt;01:20,  3.50it/s]
 44%|####4     | 225/506 [01:03&lt;01:21,  3.45it/s]
 45%|####4     | 226/506 [01:03&lt;01:19,  3.52it/s]
 45%|####4     | 227/506 [01:04&lt;01:18,  3.55it/s]
 45%|####5     | 228/506 [01:04&lt;01:17,  3.59it/s]
 45%|####5     | 229/506 [01:04&lt;01:16,  3.63it/s]
 45%|####5     | 230/506 [01:04&lt;01:16,  3.61it/s]
 46%|####5     | 231/506 [01:05&lt;01:15,  3.65it/s]
 46%|####5     | 232/506 [01:05&lt;01:15,  3.65it/s]
 46%|####6     | 233/506 [01:05&lt;01:17,  3.52it/s]
 46%|####6     | 234/506 [01:05&lt;01:16,  3.58it/s]
 46%|####6     | 235/506 [01:06&lt;01:15,  3.60it/s]
 47%|####6     | 236/506 [01:06&lt;01:14,  3.64it/s]
 47%|####6     | 237/506 [01:06&lt;01:13,  3.66it/s]
 47%|####7     | 238/506 [01:07&lt;01:13,  3.65it/s]
 47%|####7     | 239/506 [01:07&lt;01:13,  3.65it/s]
 47%|####7     | 240/506 [01:07&lt;01:12,  3.67it/s]
 48%|####7     | 241/506 [01:07&lt;01:12,  3.67it/s]
 48%|####7     | 242/506 [01:08&lt;01:11,  3.68it/s]
 48%|####8     | 243/506 [01:08&lt;01:11,  3.68it/s]
 48%|####8     | 244/506 [01:08&lt;01:11,  3.67it/s]
 48%|####8     | 245/506 [01:08&lt;01:11,  3.67it/s]
 49%|####8     | 246/506 [01:09&lt;01:10,  3.69it/s]
 49%|####8     | 247/506 [01:09&lt;01:12,  3.56it/s]
 49%|####9     | 248/506 [01:09&lt;01:12,  3.57it/s]
 49%|####9     | 249/506 [01:10&lt;01:11,  3.58it/s]
 49%|####9     | 250/506 [01:10&lt;01:10,  3.63it/s]
 50%|####9     | 251/506 [01:10&lt;01:09,  3.65it/s]
 50%|####9     | 252/506 [01:10&lt;01:09,  3.65it/s]
 50%|#####     | 253/506 [01:11&lt;01:09,  3.65it/s]
 50%|#####     | 254/506 [01:11&lt;01:09,  3.63it/s]
 50%|#####     | 255/506 [01:11&lt;01:11,  3.52it/s]
 51%|#####     | 256/506 [01:12&lt;01:10,  3.56it/s]
 51%|#####     | 257/506 [01:12&lt;01:09,  3.61it/s]
 51%|#####     | 258/506 [01:12&lt;01:08,  3.63it/s]
 51%|#####1    | 259/506 [01:12&lt;01:07,  3.66it/s]
 51%|#####1    | 260/506 [01:13&lt;01:07,  3.66it/s]
 52%|#####1    | 261/506 [01:13&lt;01:06,  3.68it/s]
 52%|#####1    | 262/506 [01:13&lt;01:06,  3.67it/s]
 52%|#####1    | 263/506 [01:13&lt;01:06,  3.68it/s]
 52%|#####2    | 264/506 [01:14&lt;01:05,  3.69it/s]
 52%|#####2    | 265/506 [01:14&lt;01:05,  3.70it/s]
 53%|#####2    | 266/506 [01:14&lt;01:05,  3.66it/s]
 53%|#####2    | 267/506 [01:15&lt;01:05,  3.64it/s]
 53%|#####2    | 268/506 [01:15&lt;01:05,  3.63it/s]
 53%|#####3    | 269/506 [01:15&lt;01:05,  3.60it/s]
 53%|#####3    | 270/506 [01:15&lt;01:08,  3.47it/s]
 54%|#####3    | 271/506 [01:16&lt;01:07,  3.49it/s]
 54%|#####3    | 272/506 [01:16&lt;01:06,  3.53it/s]
 54%|#####3    | 273/506 [01:16&lt;01:05,  3.56it/s]
 54%|#####4    | 274/506 [01:16&lt;01:04,  3.57it/s]
 54%|#####4    | 275/506 [01:17&lt;01:04,  3.58it/s]
 55%|#####4    | 276/506 [01:17&lt;01:04,  3.59it/s]
 55%|#####4    | 277/506 [01:17&lt;01:03,  3.59it/s]
 55%|#####4    | 278/506 [01:18&lt;01:05,  3.46it/s]
 55%|#####5    | 279/506 [01:18&lt;01:05,  3.49it/s]
 55%|#####5    | 280/506 [01:18&lt;01:04,  3.51it/s]
 56%|#####5    | 281/506 [01:18&lt;01:03,  3.53it/s]
 56%|#####5    | 282/506 [01:19&lt;01:03,  3.53it/s]
 56%|#####5    | 283/506 [01:19&lt;01:03,  3.51it/s]
 56%|#####6    | 284/506 [01:19&lt;01:04,  3.42it/s]
 56%|#####6    | 285/506 [01:20&lt;01:03,  3.48it/s]
 57%|#####6    | 286/506 [01:20&lt;01:02,  3.51it/s]
 57%|#####6    | 287/506 [01:20&lt;01:02,  3.52it/s]
 57%|#####6    | 288/506 [01:20&lt;01:01,  3.54it/s]
 57%|#####7    | 289/506 [01:21&lt;01:01,  3.56it/s]
 57%|#####7    | 290/506 [01:21&lt;01:00,  3.59it/s]
 58%|#####7    | 291/506 [01:21&lt;00:59,  3.60it/s]
 58%|#####7    | 292/506 [01:22&lt;01:00,  3.52it/s]
 58%|#####7    | 293/506 [01:22&lt;00:59,  3.58it/s]
 58%|#####8    | 294/506 [01:22&lt;00:58,  3.60it/s]
 58%|#####8    | 295/506 [01:22&lt;00:58,  3.61it/s]
 58%|#####8    | 296/506 [01:23&lt;00:58,  3.60it/s]
 59%|#####8    | 297/506 [01:23&lt;00:57,  3.61it/s]
 59%|#####8    | 298/506 [01:23&lt;00:57,  3.61it/s]
 59%|#####9    | 299/506 [01:24&lt;00:57,  3.63it/s]
 59%|#####9    | 300/506 [01:24&lt;00:58,  3.50it/s]
 59%|#####9    | 301/506 [01:24&lt;00:57,  3.54it/s]
 60%|#####9    | 302/506 [01:24&lt;00:56,  3.59it/s]
 60%|#####9    | 303/506 [01:25&lt;00:56,  3.59it/s]
 60%|######    | 304/506 [01:25&lt;00:55,  3.62it/s]
 60%|######    | 305/506 [01:25&lt;00:55,  3.63it/s]
 60%|######    | 306/506 [01:25&lt;00:54,  3.65it/s]
 61%|######    | 307/506 [01:26&lt;00:54,  3.67it/s]
 61%|######    | 308/506 [01:26&lt;00:54,  3.65it/s]
 61%|######1   | 309/506 [01:26&lt;00:53,  3.65it/s]
 61%|######1   | 310/506 [01:27&lt;00:53,  3.66it/s]
 61%|######1   | 311/506 [01:27&lt;00:53,  3.66it/s]
 62%|######1   | 312/506 [01:27&lt;00:53,  3.66it/s]
 62%|######1   | 313/506 [01:27&lt;00:53,  3.63it/s]
 62%|######2   | 314/506 [01:28&lt;00:53,  3.61it/s]
 62%|######2   | 315/506 [01:28&lt;00:54,  3.50it/s]
 62%|######2   | 316/506 [01:28&lt;00:53,  3.55it/s]
 63%|######2   | 317/506 [01:29&lt;00:52,  3.58it/s]
 63%|######2   | 318/506 [01:29&lt;00:52,  3.61it/s]
 63%|######3   | 319/506 [01:29&lt;00:51,  3.60it/s]
 63%|######3   | 320/506 [01:29&lt;00:51,  3.58it/s]
 63%|######3   | 321/506 [01:30&lt;00:51,  3.58it/s]
 64%|######3   | 322/506 [01:30&lt;00:51,  3.58it/s]
 64%|######3   | 323/506 [01:30&lt;00:53,  3.45it/s]
 64%|######4   | 324/506 [01:31&lt;00:52,  3.48it/s]
 64%|######4   | 325/506 [01:31&lt;00:51,  3.53it/s]
 64%|######4   | 326/506 [01:31&lt;00:50,  3.54it/s]
 65%|######4   | 327/506 [01:31&lt;00:50,  3.56it/s]
 65%|######4   | 328/506 [01:32&lt;00:49,  3.60it/s]
 65%|######5   | 329/506 [01:32&lt;00:48,  3.62it/s]
 65%|######5   | 330/506 [01:32&lt;00:48,  3.63it/s]
 65%|######5   | 331/506 [01:32&lt;00:47,  3.65it/s]
 66%|######5   | 332/506 [01:33&lt;00:47,  3.66it/s]
 66%|######5   | 333/506 [01:33&lt;00:46,  3.68it/s]
 66%|######6   | 334/506 [01:33&lt;00:46,  3.68it/s]
 66%|######6   | 335/506 [01:34&lt;00:46,  3.68it/s]
 66%|######6   | 336/506 [01:34&lt;00:45,  3.70it/s]
 67%|######6   | 337/506 [01:34&lt;00:47,  3.58it/s]
 67%|######6   | 338/506 [01:34&lt;00:46,  3.62it/s]
 67%|######6   | 339/506 [01:35&lt;00:45,  3.65it/s]
 67%|######7   | 340/506 [01:35&lt;00:45,  3.66it/s]
 67%|######7   | 341/506 [01:35&lt;00:45,  3.66it/s]
 68%|######7   | 342/506 [01:35&lt;00:44,  3.68it/s]
 68%|######7   | 343/506 [01:36&lt;00:44,  3.68it/s]
 68%|######7   | 344/506 [01:36&lt;00:43,  3.70it/s]
 68%|######8   | 345/506 [01:36&lt;00:44,  3.59it/s]
 68%|######8   | 346/506 [01:37&lt;00:44,  3.60it/s]
 69%|######8   | 347/506 [01:37&lt;00:44,  3.56it/s]
 69%|######8   | 348/506 [01:37&lt;00:44,  3.52it/s]
 69%|######8   | 349/506 [01:37&lt;00:44,  3.50it/s]
 69%|######9   | 350/506 [01:38&lt;00:44,  3.52it/s]
 69%|######9   | 351/506 [01:38&lt;00:43,  3.58it/s]
 70%|######9   | 352/506 [01:38&lt;00:42,  3.61it/s]
 70%|######9   | 353/506 [01:39&lt;00:41,  3.65it/s]
 70%|######9   | 354/506 [01:39&lt;00:41,  3.67it/s]
 70%|#######   | 355/506 [01:39&lt;00:40,  3.69it/s]
 70%|#######   | 356/506 [01:39&lt;00:40,  3.69it/s]
 71%|#######   | 357/506 [01:40&lt;00:40,  3.66it/s]
 71%|#######   | 358/506 [01:40&lt;00:40,  3.63it/s]
 71%|#######   | 359/506 [01:40&lt;00:40,  3.61it/s]
 71%|#######1  | 360/506 [01:40&lt;00:41,  3.48it/s]
 71%|#######1  | 361/506 [01:41&lt;00:41,  3.52it/s]
 72%|#######1  | 362/506 [01:41&lt;00:40,  3.55it/s]
 72%|#######1  | 363/506 [01:41&lt;00:40,  3.55it/s]
 72%|#######1  | 364/506 [01:42&lt;00:39,  3.58it/s]
 72%|#######2  | 365/506 [01:42&lt;00:39,  3.61it/s]
 72%|#######2  | 366/506 [01:42&lt;00:38,  3.62it/s]
 73%|#######2  | 367/506 [01:42&lt;00:38,  3.61it/s]
 73%|#######2  | 368/506 [01:43&lt;00:39,  3.53it/s]
 73%|#######2  | 369/506 [01:43&lt;00:38,  3.60it/s]
 73%|#######3  | 370/506 [01:43&lt;00:37,  3.61it/s]
 73%|#######3  | 371/506 [01:44&lt;00:37,  3.63it/s]
 74%|#######3  | 372/506 [01:44&lt;00:36,  3.64it/s]
 74%|#######3  | 373/506 [01:44&lt;00:36,  3.63it/s]
 74%|#######3  | 374/506 [01:44&lt;00:36,  3.61it/s]
 74%|#######4  | 375/506 [01:45&lt;00:36,  3.59it/s]
 74%|#######4  | 376/506 [01:45&lt;00:36,  3.54it/s]
 75%|#######4  | 377/506 [01:45&lt;00:36,  3.57it/s]
 75%|#######4  | 378/506 [01:45&lt;00:35,  3.59it/s]
 75%|#######4  | 379/506 [01:46&lt;00:35,  3.62it/s]
 75%|#######5  | 380/506 [01:46&lt;00:34,  3.64it/s]
 75%|#######5  | 381/506 [01:46&lt;00:34,  3.64it/s]
 75%|#######5  | 382/506 [01:47&lt;00:34,  3.63it/s]
 76%|#######5  | 383/506 [01:47&lt;00:34,  3.53it/s]
 76%|#######5  | 384/506 [01:47&lt;00:34,  3.56it/s]
 76%|#######6  | 385/506 [01:47&lt;00:33,  3.56it/s]
 76%|#######6  | 386/506 [01:48&lt;00:33,  3.56it/s]
 76%|#######6  | 387/506 [01:48&lt;00:33,  3.52it/s]
 77%|#######6  | 388/506 [01:48&lt;00:34,  3.44it/s]
 77%|#######6  | 389/506 [01:49&lt;00:33,  3.44it/s]
 77%|#######7  | 390/506 [01:49&lt;00:34,  3.40it/s]
 77%|#######7  | 391/506 [01:49&lt;00:33,  3.44it/s]
 77%|#######7  | 392/506 [01:49&lt;00:32,  3.48it/s]
 78%|#######7  | 393/506 [01:50&lt;00:32,  3.50it/s]
 78%|#######7  | 394/506 [01:50&lt;00:31,  3.52it/s]
 78%|#######8  | 395/506 [01:50&lt;00:31,  3.53it/s]
 78%|#######8  | 396/506 [01:51&lt;00:31,  3.54it/s]
 78%|#######8  | 397/506 [01:51&lt;00:30,  3.55it/s]
 79%|#######8  | 398/506 [01:51&lt;00:30,  3.56it/s]
 79%|#######8  | 399/506 [01:51&lt;00:29,  3.58it/s]
 79%|#######9  | 400/506 [01:52&lt;00:29,  3.58it/s]
 79%|#######9  | 401/506 [01:52&lt;00:29,  3.57it/s]
 79%|#######9  | 402/506 [01:52&lt;00:29,  3.53it/s]
 80%|#######9  | 403/506 [01:53&lt;00:28,  3.56it/s]
 80%|#######9  | 404/506 [01:53&lt;00:28,  3.55it/s]
 80%|########  | 405/506 [01:53&lt;00:29,  3.44it/s]
 80%|########  | 406/506 [01:53&lt;00:28,  3.48it/s]
 80%|########  | 407/506 [01:54&lt;00:28,  3.53it/s]
 81%|########  | 408/506 [01:54&lt;00:27,  3.57it/s]
 81%|########  | 409/506 [01:54&lt;00:27,  3.58it/s]
 81%|########1 | 410/506 [01:55&lt;00:26,  3.60it/s]
 81%|########1 | 411/506 [01:55&lt;00:26,  3.61it/s]
 81%|########1 | 412/506 [01:55&lt;00:26,  3.57it/s]
 82%|########1 | 413/506 [01:55&lt;00:26,  3.46it/s]
 82%|########1 | 414/506 [01:56&lt;00:26,  3.49it/s]
 82%|########2 | 415/506 [01:56&lt;00:25,  3.51it/s]
 82%|########2 | 416/506 [01:56&lt;00:25,  3.51it/s]
 82%|########2 | 417/506 [01:57&lt;00:25,  3.53it/s]
 83%|########2 | 418/506 [01:57&lt;00:24,  3.56it/s]
 83%|########2 | 419/506 [01:57&lt;00:24,  3.56it/s]
 83%|########3 | 420/506 [01:57&lt;00:24,  3.56it/s]
 83%|########3 | 421/506 [01:58&lt;00:24,  3.53it/s]
 83%|########3 | 422/506 [01:58&lt;00:23,  3.54it/s]
 84%|########3 | 423/506 [01:58&lt;00:23,  3.53it/s]
 84%|########3 | 424/506 [01:58&lt;00:23,  3.54it/s]
 84%|########3 | 425/506 [01:59&lt;00:22,  3.57it/s]
 84%|########4 | 426/506 [01:59&lt;00:22,  3.58it/s]
 84%|########4 | 427/506 [01:59&lt;00:22,  3.57it/s]
 85%|########4 | 428/506 [02:00&lt;00:22,  3.43it/s]
 85%|########4 | 429/506 [02:00&lt;00:22,  3.49it/s]
 85%|########4 | 430/506 [02:00&lt;00:21,  3.52it/s]
 85%|########5 | 431/506 [02:00&lt;00:21,  3.54it/s]
 85%|########5 | 432/506 [02:01&lt;00:20,  3.57it/s]
 86%|########5 | 433/506 [02:01&lt;00:20,  3.56it/s]
 86%|########5 | 434/506 [02:01&lt;00:20,  3.47it/s]
 86%|########5 | 435/506 [02:02&lt;00:20,  3.52it/s]
 86%|########6 | 436/506 [02:02&lt;00:20,  3.44it/s]
 86%|########6 | 437/506 [02:02&lt;00:19,  3.47it/s]
 87%|########6 | 438/506 [02:02&lt;00:19,  3.48it/s]
 87%|########6 | 439/506 [02:03&lt;00:19,  3.50it/s]
 87%|########6 | 440/506 [02:03&lt;00:18,  3.53it/s]
 87%|########7 | 441/506 [02:03&lt;00:18,  3.53it/s]
 87%|########7 | 442/506 [02:04&lt;00:18,  3.53it/s]
 88%|########7 | 443/506 [02:04&lt;00:17,  3.54it/s]
 88%|########7 | 444/506 [02:04&lt;00:17,  3.55it/s]
 88%|########7 | 445/506 [02:04&lt;00:17,  3.56it/s]
 88%|########8 | 446/506 [02:05&lt;00:16,  3.56it/s]
 88%|########8 | 447/506 [02:05&lt;00:16,  3.54it/s]
 89%|########8 | 448/506 [02:05&lt;00:16,  3.56it/s]
 89%|########8 | 449/506 [02:06&lt;00:16,  3.56it/s]
 89%|########8 | 450/506 [02:06&lt;00:16,  3.46it/s]
 89%|########9 | 451/506 [02:06&lt;00:15,  3.50it/s]
 89%|########9 | 452/506 [02:06&lt;00:15,  3.53it/s]
 90%|########9 | 453/506 [02:07&lt;00:14,  3.56it/s]
 90%|########9 | 454/506 [02:07&lt;00:14,  3.59it/s]
 90%|########9 | 455/506 [02:07&lt;00:14,  3.60it/s]
 90%|######### | 456/506 [02:08&lt;00:13,  3.62it/s]
 90%|######### | 457/506 [02:08&lt;00:13,  3.62it/s]
 91%|######### | 458/506 [02:08&lt;00:13,  3.51it/s]
 91%|######### | 459/506 [02:08&lt;00:13,  3.53it/s]
 91%|######### | 460/506 [02:09&lt;00:12,  3.55it/s]
 91%|#########1| 461/506 [02:09&lt;00:12,  3.56it/s]
 91%|#########1| 462/506 [02:09&lt;00:12,  3.56it/s]
 92%|#########1| 463/506 [02:09&lt;00:12,  3.57it/s]
 92%|#########1| 464/506 [02:10&lt;00:11,  3.57it/s]
 92%|#########1| 465/506 [02:10&lt;00:11,  3.57it/s]
 92%|#########2| 466/506 [02:10&lt;00:11,  3.59it/s]
 92%|#########2| 467/506 [02:11&lt;00:10,  3.62it/s]
 92%|#########2| 468/506 [02:11&lt;00:10,  3.64it/s]
 93%|#########2| 469/506 [02:11&lt;00:10,  3.65it/s]
 93%|#########2| 470/506 [02:11&lt;00:09,  3.65it/s]
 93%|#########3| 471/506 [02:12&lt;00:09,  3.67it/s]
 93%|#########3| 472/506 [02:12&lt;00:09,  3.68it/s]
 93%|#########3| 473/506 [02:12&lt;00:09,  3.55it/s]
 94%|#########3| 474/506 [02:13&lt;00:08,  3.60it/s]
 94%|#########3| 475/506 [02:13&lt;00:08,  3.62it/s]
 94%|#########4| 476/506 [02:13&lt;00:08,  3.64it/s]
 94%|#########4| 477/506 [02:13&lt;00:07,  3.65it/s]
 94%|#########4| 478/506 [02:14&lt;00:07,  3.64it/s]
 95%|#########4| 479/506 [02:14&lt;00:07,  3.65it/s]
 95%|#########4| 480/506 [02:14&lt;00:07,  3.64it/s]
 95%|#########5| 481/506 [02:14&lt;00:07,  3.54it/s]
 95%|#########5| 482/506 [02:15&lt;00:06,  3.59it/s]
 95%|#########5| 483/506 [02:15&lt;00:06,  3.63it/s]
 96%|#########5| 484/506 [02:15&lt;00:06,  3.63it/s]
 96%|#########5| 485/506 [02:16&lt;00:05,  3.66it/s]
 96%|#########6| 486/506 [02:16&lt;00:05,  3.67it/s]
 96%|#########6| 487/506 [02:16&lt;00:05,  3.68it/s]
 96%|#########6| 488/506 [02:16&lt;00:04,  3.68it/s]
 97%|#########6| 489/506 [02:17&lt;00:04,  3.69it/s]
 97%|#########6| 490/506 [02:17&lt;00:04,  3.69it/s]
 97%|#########7| 491/506 [02:17&lt;00:04,  3.69it/s]
 97%|#########7| 492/506 [02:17&lt;00:03,  3.69it/s]
 97%|#########7| 493/506 [02:18&lt;00:03,  3.69it/s]
 98%|#########7| 494/506 [02:18&lt;00:03,  3.70it/s]
 98%|#########7| 495/506 [02:18&lt;00:03,  3.57it/s]
 98%|#########8| 496/506 [02:19&lt;00:02,  3.59it/s]
 98%|#########8| 497/506 [02:19&lt;00:02,  3.62it/s]
 98%|#########8| 498/506 [02:19&lt;00:02,  3.63it/s]
 99%|#########8| 499/506 [02:19&lt;00:01,  3.66it/s]
 99%|#########8| 500/506 [02:20&lt;00:01,  3.66it/s]
 99%|#########9| 501/506 [02:20&lt;00:01,  3.67it/s]
 99%|#########9| 502/506 [02:20&lt;00:01,  3.68it/s]
 99%|#########9| 503/506 [02:20&lt;00:00,  3.58it/s]
100%|#########9| 504/506 [02:21&lt;00:00,  3.61it/s]
100%|#########9| 505/506 [02:21&lt;00:00,  3.65it/s]
100%|##########| 506/506 [02:21&lt;00:00,  3.66it/s]</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb17-1" data-line-number="1">end <span class="op">=</span> time.time()</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">t1 <span class="op">=</span> end <span class="op">-</span> start  <span class="co"># ~ computatiom time</span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co"># Compute exact TreeSHAP values</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5">start <span class="op">=</span> time.time()</a>
<a class="sourceLine" id="cb17-6" data-line-number="6">res_shap_tree <span class="op">=</span> rfo_explainer_sampling.shap_values(X, approximate<span class="op">=</span><span class="va">False</span>)</a></code></pre></div>
<pre><code>## 
  0%|          | 0/506 [00:00&lt;?, ?it/s]
  0%|          | 1/506 [00:01&lt;09:22,  1.11s/it]
  0%|          | 2/506 [00:02&lt;09:37,  1.15s/it]
  1%|          | 3/506 [00:03&lt;09:29,  1.13s/it]
  1%|          | 4/506 [00:04&lt;09:22,  1.12s/it]
  1%|          | 5/506 [00:05&lt;09:17,  1.11s/it]
  1%|1         | 6/506 [00:06&lt;09:21,  1.12s/it]
  1%|1         | 7/506 [00:07&lt;09:29,  1.14s/it]
  2%|1         | 8/506 [00:09&lt;09:24,  1.13s/it]
  2%|1         | 9/506 [00:10&lt;09:22,  1.13s/it]
  2%|1         | 10/506 [00:11&lt;09:18,  1.13s/it]
  2%|2         | 11/506 [00:12&lt;09:22,  1.14s/it]
  2%|2         | 12/506 [00:13&lt;09:22,  1.14s/it]
  3%|2         | 13/506 [00:14&lt;09:18,  1.13s/it]
  3%|2         | 14/506 [00:15&lt;09:25,  1.15s/it]
  3%|2         | 15/506 [00:17&lt;09:24,  1.15s/it]
  3%|3         | 16/506 [00:18&lt;09:24,  1.15s/it]
  3%|3         | 17/506 [00:19&lt;09:19,  1.14s/it]
  4%|3         | 18/506 [00:20&lt;09:14,  1.14s/it]
  4%|3         | 19/506 [00:21&lt;09:25,  1.16s/it]
  4%|3         | 20/506 [00:22&lt;09:24,  1.16s/it]
  4%|4         | 21/506 [00:24&lt;09:24,  1.16s/it]
  4%|4         | 22/506 [00:25&lt;09:24,  1.17s/it]
  5%|4         | 23/506 [00:26&lt;09:19,  1.16s/it]
  5%|4         | 24/506 [00:27&lt;09:21,  1.17s/it]
  5%|4         | 25/506 [00:28&lt;09:20,  1.17s/it]
  5%|5         | 26/506 [00:29&lt;09:18,  1.16s/it]
  5%|5         | 27/506 [00:30&lt;09:15,  1.16s/it]
  6%|5         | 28/506 [00:32&lt;09:12,  1.16s/it]
  6%|5         | 29/506 [00:33&lt;09:16,  1.17s/it]
  6%|5         | 30/506 [00:34&lt;09:10,  1.16s/it]
  6%|6         | 31/506 [00:35&lt;09:07,  1.15s/it]
  6%|6         | 32/506 [00:36&lt;09:15,  1.17s/it]
  7%|6         | 33/506 [00:37&lt;09:13,  1.17s/it]
  7%|6         | 34/506 [00:39&lt;09:12,  1.17s/it]
  7%|6         | 35/506 [00:40&lt;09:19,  1.19s/it]
  7%|7         | 36/506 [00:41&lt;09:22,  1.20s/it]
  7%|7         | 37/506 [00:42&lt;09:16,  1.19s/it]
  8%|7         | 38/506 [00:43&lt;09:15,  1.19s/it]
  8%|7         | 39/506 [00:45&lt;09:10,  1.18s/it]
  8%|7         | 40/506 [00:46&lt;08:58,  1.15s/it]
  8%|8         | 41/506 [00:47&lt;08:49,  1.14s/it]
  8%|8         | 42/506 [00:48&lt;08:46,  1.13s/it]
  8%|8         | 43/506 [00:49&lt;08:52,  1.15s/it]
  9%|8         | 44/506 [00:50&lt;09:01,  1.17s/it]
  9%|8         | 45/506 [00:52&lt;08:57,  1.17s/it]
  9%|9         | 46/506 [00:53&lt;08:58,  1.17s/it]
  9%|9         | 47/506 [00:54&lt;09:01,  1.18s/it]
  9%|9         | 48/506 [00:55&lt;08:58,  1.18s/it]
 10%|9         | 49/506 [00:56&lt;08:55,  1.17s/it]
 10%|9         | 50/506 [00:57&lt;08:50,  1.16s/it]
 10%|#         | 51/506 [00:59&lt;08:55,  1.18s/it]
 10%|#         | 52/506 [01:00&lt;08:58,  1.19s/it]
 10%|#         | 53/506 [01:01&lt;08:57,  1.19s/it]
 11%|#         | 54/506 [01:02&lt;08:59,  1.19s/it]
 11%|#         | 55/506 [01:03&lt;08:55,  1.19s/it]
 11%|#1        | 56/506 [01:04&lt;08:49,  1.18s/it]
 11%|#1        | 57/506 [01:06&lt;08:55,  1.19s/it]
 11%|#1        | 58/506 [01:07&lt;08:48,  1.18s/it]
 12%|#1        | 59/506 [01:08&lt;08:42,  1.17s/it]
 12%|#1        | 60/506 [01:09&lt;08:48,  1.19s/it]
 12%|#2        | 61/506 [01:10&lt;08:53,  1.20s/it]
 12%|#2        | 62/506 [01:12&lt;08:52,  1.20s/it]
 12%|#2        | 63/506 [01:13&lt;08:53,  1.20s/it]
 13%|#2        | 64/506 [01:14&lt;08:47,  1.19s/it]
 13%|#2        | 65/506 [01:15&lt;08:42,  1.19s/it]
 13%|#3        | 66/506 [01:16&lt;08:39,  1.18s/it]
 13%|#3        | 67/506 [01:18&lt;08:41,  1.19s/it]
 13%|#3        | 68/506 [01:19&lt;08:43,  1.20s/it]
 14%|#3        | 69/506 [01:20&lt;08:43,  1.20s/it]
 14%|#3        | 70/506 [01:21&lt;08:40,  1.19s/it]
 14%|#4        | 71/506 [01:22&lt;08:41,  1.20s/it]
 14%|#4        | 72/506 [01:24&lt;08:59,  1.24s/it]
 14%|#4        | 73/506 [01:25&lt;08:52,  1.23s/it]
 15%|#4        | 74/506 [01:26&lt;08:56,  1.24s/it]
 15%|#4        | 75/506 [01:27&lt;08:51,  1.23s/it]
 15%|#5        | 76/506 [01:29&lt;08:50,  1.23s/it]
 15%|#5        | 77/506 [01:30&lt;08:44,  1.22s/it]
 15%|#5        | 78/506 [01:31&lt;08:44,  1.23s/it]
 16%|#5        | 79/506 [01:32&lt;08:40,  1.22s/it]
 16%|#5        | 80/506 [01:34&lt;08:44,  1.23s/it]
 16%|#6        | 81/506 [01:35&lt;08:36,  1.21s/it]
 16%|#6        | 82/506 [01:36&lt;08:32,  1.21s/it]
 16%|#6        | 83/506 [01:37&lt;08:23,  1.19s/it]
 17%|#6        | 84/506 [01:38&lt;08:19,  1.18s/it]
 17%|#6        | 85/506 [01:39&lt;08:20,  1.19s/it]
 17%|#6        | 86/506 [01:41&lt;08:32,  1.22s/it]
 17%|#7        | 87/506 [01:42&lt;08:26,  1.21s/it]
 17%|#7        | 88/506 [01:43&lt;08:22,  1.20s/it]
 18%|#7        | 89/506 [01:44&lt;08:17,  1.19s/it]
 18%|#7        | 90/506 [01:45&lt;08:06,  1.17s/it]
 18%|#7        | 91/506 [01:47&lt;08:03,  1.16s/it]
 18%|#8        | 92/506 [01:48&lt;08:10,  1.19s/it]
 18%|#8        | 93/506 [01:49&lt;08:09,  1.19s/it]
 19%|#8        | 94/506 [01:50&lt;08:09,  1.19s/it]
 19%|#8        | 95/506 [01:51&lt;08:09,  1.19s/it]
 19%|#8        | 96/506 [01:52&lt;07:59,  1.17s/it]
 19%|#9        | 97/506 [01:54&lt;07:55,  1.16s/it]
 19%|#9        | 98/506 [01:55&lt;07:47,  1.15s/it]
 20%|#9        | 99/506 [01:56&lt;07:41,  1.13s/it]
 20%|#9        | 100/506 [01:57&lt;07:37,  1.13s/it]
 20%|#9        | 101/506 [01:58&lt;07:41,  1.14s/it]
 20%|##        | 102/506 [01:59&lt;07:39,  1.14s/it]
 20%|##        | 103/506 [02:00&lt;07:41,  1.15s/it]
 21%|##        | 104/506 [02:02&lt;07:51,  1.17s/it]
 21%|##        | 105/506 [02:03&lt;07:57,  1.19s/it]
 21%|##        | 106/506 [02:04&lt;08:00,  1.20s/it]
 21%|##1       | 107/506 [02:05&lt;07:49,  1.18s/it]
 21%|##1       | 108/506 [02:06&lt;07:54,  1.19s/it]
 22%|##1       | 109/506 [02:08&lt;07:56,  1.20s/it]
 22%|##1       | 110/506 [02:09&lt;07:47,  1.18s/it]
 22%|##1       | 111/506 [02:10&lt;07:52,  1.20s/it]
 22%|##2       | 112/506 [02:11&lt;07:50,  1.19s/it]
 22%|##2       | 113/506 [02:12&lt;07:52,  1.20s/it]
 23%|##2       | 114/506 [02:14&lt;07:49,  1.20s/it]
 23%|##2       | 115/506 [02:15&lt;07:47,  1.20s/it]
 23%|##2       | 116/506 [02:16&lt;07:41,  1.18s/it]
 23%|##3       | 117/506 [02:17&lt;07:42,  1.19s/it]
 23%|##3       | 118/506 [02:18&lt;07:45,  1.20s/it]
 24%|##3       | 119/506 [02:20&lt;07:42,  1.20s/it]
 24%|##3       | 120/506 [02:21&lt;07:39,  1.19s/it]
 24%|##3       | 121/506 [02:22&lt;07:34,  1.18s/it]
 24%|##4       | 122/506 [02:23&lt;07:34,  1.18s/it]
 24%|##4       | 123/506 [02:24&lt;07:31,  1.18s/it]
 25%|##4       | 124/506 [02:25&lt;07:24,  1.16s/it]
 25%|##4       | 125/506 [02:27&lt;07:19,  1.15s/it]
 25%|##4       | 126/506 [02:28&lt;07:16,  1.15s/it]
 25%|##5       | 127/506 [02:29&lt;07:13,  1.14s/it]
 25%|##5       | 128/506 [02:30&lt;07:15,  1.15s/it]
 25%|##5       | 129/506 [02:31&lt;07:14,  1.15s/it]
 26%|##5       | 130/506 [02:32&lt;07:15,  1.16s/it]
 26%|##5       | 131/506 [02:34&lt;07:22,  1.18s/it]
 26%|##6       | 132/506 [02:35&lt;07:21,  1.18s/it]
 26%|##6       | 133/506 [02:36&lt;07:21,  1.18s/it]
 26%|##6       | 134/506 [02:37&lt;07:14,  1.17s/it]
 27%|##6       | 135/506 [02:38&lt;07:12,  1.17s/it]
 27%|##6       | 136/506 [02:39&lt;07:10,  1.16s/it]
 27%|##7       | 137/506 [02:41&lt;07:13,  1.17s/it]
 27%|##7       | 138/506 [02:42&lt;07:09,  1.17s/it]
 27%|##7       | 139/506 [02:43&lt;07:04,  1.16s/it]
 28%|##7       | 140/506 [02:44&lt;07:04,  1.16s/it]
 28%|##7       | 141/506 [02:45&lt;07:03,  1.16s/it]
 28%|##8       | 142/506 [02:46&lt;07:00,  1.15s/it]
 28%|##8       | 143/506 [02:47&lt;06:54,  1.14s/it]
 28%|##8       | 144/506 [02:49&lt;06:56,  1.15s/it]
 29%|##8       | 145/506 [02:50&lt;06:49,  1.13s/it]
 29%|##8       | 146/506 [02:51&lt;06:49,  1.14s/it]
 29%|##9       | 147/506 [02:52&lt;06:52,  1.15s/it]
 29%|##9       | 148/506 [02:53&lt;06:55,  1.16s/it]
 29%|##9       | 149/506 [02:54&lt;06:50,  1.15s/it]
 30%|##9       | 150/506 [02:56&lt;06:50,  1.15s/it]
 30%|##9       | 151/506 [02:57&lt;06:56,  1.17s/it]
 30%|###       | 152/506 [02:58&lt;06:56,  1.18s/it]
 30%|###       | 153/506 [02:59&lt;06:52,  1.17s/it]
 30%|###       | 154/506 [03:00&lt;06:49,  1.16s/it]
 31%|###       | 155/506 [03:01&lt;06:49,  1.17s/it]
 31%|###       | 156/506 [03:03&lt;06:52,  1.18s/it]
 31%|###1      | 157/506 [03:04&lt;06:49,  1.17s/it]
 31%|###1      | 158/506 [03:05&lt;06:42,  1.16s/it]
 31%|###1      | 159/506 [03:06&lt;06:43,  1.16s/it]
 32%|###1      | 160/506 [03:07&lt;06:42,  1.16s/it]
 32%|###1      | 161/506 [03:08&lt;06:42,  1.17s/it]
 32%|###2      | 162/506 [03:09&lt;06:29,  1.13s/it]
 32%|###2      | 163/506 [03:11&lt;06:22,  1.12s/it]
 32%|###2      | 164/506 [03:12&lt;06:18,  1.11s/it]
 33%|###2      | 165/506 [03:13&lt;06:21,  1.12s/it]
 33%|###2      | 166/506 [03:14&lt;06:26,  1.14s/it]
 33%|###3      | 167/506 [03:15&lt;06:21,  1.12s/it]
 33%|###3      | 168/506 [03:16&lt;06:27,  1.15s/it]
 33%|###3      | 169/506 [03:17&lt;06:34,  1.17s/it]
 34%|###3      | 170/506 [03:19&lt;06:37,  1.18s/it]
 34%|###3      | 171/506 [03:20&lt;06:33,  1.17s/it]
 34%|###3      | 172/506 [03:21&lt;06:34,  1.18s/it]
 34%|###4      | 173/506 [03:22&lt;06:37,  1.19s/it]
 34%|###4      | 174/506 [03:23&lt;06:38,  1.20s/it]
 35%|###4      | 175/506 [03:25&lt;06:39,  1.21s/it]
 35%|###4      | 176/506 [03:26&lt;06:31,  1.19s/it]
 35%|###4      | 177/506 [03:27&lt;06:31,  1.19s/it]
 35%|###5      | 178/506 [03:29&lt;07:00,  1.28s/it]
 35%|###5      | 179/506 [03:30&lt;06:43,  1.23s/it]
 36%|###5      | 180/506 [03:31&lt;06:33,  1.21s/it]
 36%|###5      | 181/506 [03:32&lt;06:24,  1.18s/it]
 36%|###5      | 182/506 [03:33&lt;06:26,  1.19s/it]
 36%|###6      | 183/506 [03:34&lt;06:16,  1.17s/it]
 36%|###6      | 184/506 [03:35&lt;06:11,  1.16s/it]
 37%|###6      | 185/506 [03:37&lt;06:11,  1.16s/it]
 37%|###6      | 186/506 [03:38&lt;06:12,  1.17s/it]
 37%|###6      | 187/506 [03:39&lt;06:04,  1.14s/it]
 37%|###7      | 188/506 [03:40&lt;06:05,  1.15s/it]
 37%|###7      | 189/506 [03:41&lt;06:06,  1.16s/it]
 38%|###7      | 190/506 [03:42&lt;06:02,  1.15s/it]
 38%|###7      | 191/506 [03:44&lt;06:52,  1.31s/it]
 38%|###7      | 192/506 [03:46&lt;08:32,  1.63s/it]
 38%|###8      | 193/506 [03:48&lt;08:57,  1.72s/it]
 38%|###8      | 194/506 [03:49&lt;08:02,  1.55s/it]
 39%|###8      | 195/506 [03:50&lt;07:21,  1.42s/it]
 39%|###8      | 196/506 [03:52&lt;06:46,  1.31s/it]
 39%|###8      | 197/506 [03:53&lt;06:27,  1.25s/it]
 39%|###9      | 198/506 [03:54&lt;06:19,  1.23s/it]
 39%|###9      | 199/506 [03:55&lt;06:11,  1.21s/it]
 40%|###9      | 200/506 [03:56&lt;06:04,  1.19s/it]
 40%|###9      | 201/506 [03:57&lt;05:58,  1.18s/it]
 40%|###9      | 202/506 [03:59&lt;06:01,  1.19s/it]
 40%|####      | 203/506 [04:00&lt;05:51,  1.16s/it]
 40%|####      | 204/506 [04:01&lt;05:45,  1.14s/it]
 41%|####      | 205/506 [04:02&lt;05:40,  1.13s/it]
 41%|####      | 206/506 [04:03&lt;05:46,  1.15s/it]
 41%|####      | 207/506 [04:04&lt;05:46,  1.16s/it]
 41%|####1     | 208/506 [04:05&lt;05:45,  1.16s/it]
 41%|####1     | 209/506 [04:07&lt;05:50,  1.18s/it]
 42%|####1     | 210/506 [04:08&lt;05:50,  1.18s/it]
 42%|####1     | 211/506 [04:09&lt;06:02,  1.23s/it]
 42%|####1     | 212/506 [04:10&lt;05:59,  1.22s/it]
 42%|####2     | 213/506 [04:12&lt;06:19,  1.30s/it]
 42%|####2     | 214/506 [04:13&lt;06:25,  1.32s/it]
 42%|####2     | 215/506 [04:14&lt;06:14,  1.29s/it]
 43%|####2     | 216/506 [04:16&lt;06:07,  1.27s/it]
 43%|####2     | 217/506 [04:17&lt;06:05,  1.26s/it]
 43%|####3     | 218/506 [04:18&lt;05:58,  1.24s/it]
 43%|####3     | 219/506 [04:19&lt;05:51,  1.23s/it]
 43%|####3     | 220/506 [04:20&lt;05:48,  1.22s/it]
 44%|####3     | 221/506 [04:22&lt;05:45,  1.21s/it]
 44%|####3     | 222/506 [04:23&lt;05:47,  1.22s/it]
 44%|####4     | 223/506 [04:24&lt;05:50,  1.24s/it]
 44%|####4     | 224/506 [04:25&lt;05:43,  1.22s/it]
 44%|####4     | 225/506 [04:26&lt;05:32,  1.18s/it]
 45%|####4     | 226/506 [04:28&lt;05:26,  1.17s/it]
 45%|####4     | 227/506 [04:29&lt;05:20,  1.15s/it]
 45%|####5     | 228/506 [04:30&lt;05:19,  1.15s/it]
 45%|####5     | 229/506 [04:31&lt;05:16,  1.14s/it]
 45%|####5     | 230/506 [04:32&lt;05:21,  1.16s/it]
 46%|####5     | 231/506 [04:33&lt;05:24,  1.18s/it]
 46%|####5     | 232/506 [04:35&lt;05:19,  1.17s/it]
 46%|####6     | 233/506 [04:36&lt;05:13,  1.15s/it]
 46%|####6     | 234/506 [04:37&lt;05:09,  1.14s/it]
 46%|####6     | 235/506 [04:38&lt;05:13,  1.16s/it]
 47%|####6     | 236/506 [04:39&lt;05:16,  1.17s/it]
 47%|####6     | 237/506 [04:40&lt;05:16,  1.18s/it]
 47%|####7     | 238/506 [04:42&lt;05:14,  1.17s/it]
 47%|####7     | 239/506 [04:43&lt;05:15,  1.18s/it]
 47%|####7     | 240/506 [04:44&lt;05:15,  1.19s/it]
 48%|####7     | 241/506 [04:45&lt;05:14,  1.19s/it]
 48%|####7     | 242/506 [04:46&lt;05:17,  1.20s/it]
 48%|####8     | 243/506 [04:48&lt;05:22,  1.23s/it]
 48%|####8     | 244/506 [04:49&lt;05:18,  1.22s/it]
 48%|####8     | 245/506 [04:50&lt;05:16,  1.21s/it]
 49%|####8     | 246/506 [04:51&lt;05:19,  1.23s/it]
 49%|####8     | 247/506 [04:53&lt;05:21,  1.24s/it]
 49%|####9     | 248/506 [04:54&lt;05:17,  1.23s/it]
 49%|####9     | 249/506 [04:55&lt;05:12,  1.22s/it]
 49%|####9     | 250/506 [04:56&lt;05:07,  1.20s/it]
 50%|####9     | 251/506 [04:57&lt;05:05,  1.20s/it]
 50%|####9     | 252/506 [04:58&lt;05:01,  1.19s/it]
 50%|#####     | 253/506 [05:00&lt;04:56,  1.17s/it]
 50%|#####     | 254/506 [05:01&lt;04:50,  1.15s/it]
 50%|#####     | 255/506 [05:02&lt;04:54,  1.17s/it]
 51%|#####     | 256/506 [05:03&lt;04:55,  1.18s/it]
 51%|#####     | 257/506 [05:04&lt;04:49,  1.16s/it]
 51%|#####     | 258/506 [05:05&lt;04:43,  1.14s/it]
 51%|#####1    | 259/506 [05:06&lt;04:41,  1.14s/it]
 51%|#####1    | 260/506 [05:08&lt;04:38,  1.13s/it]
 52%|#####1    | 261/506 [05:09&lt;04:34,  1.12s/it]
 52%|#####1    | 262/506 [05:10&lt;04:30,  1.11s/it]
 52%|#####1    | 263/506 [05:11&lt;04:29,  1.11s/it]
 52%|#####2    | 264/506 [05:12&lt;04:27,  1.11s/it]
 52%|#####2    | 265/506 [05:13&lt;04:26,  1.11s/it]
 53%|#####2    | 266/506 [05:14&lt;04:29,  1.12s/it]
 53%|#####2    | 267/506 [05:15&lt;04:29,  1.13s/it]
 53%|#####2    | 268/506 [05:16&lt;04:24,  1.11s/it]
 53%|#####3    | 269/506 [05:18&lt;04:20,  1.10s/it]
 53%|#####3    | 270/506 [05:19&lt;04:26,  1.13s/it]
 54%|#####3    | 271/506 [05:20&lt;04:32,  1.16s/it]
 54%|#####3    | 272/506 [05:21&lt;04:31,  1.16s/it]
 54%|#####3    | 273/506 [05:22&lt;04:34,  1.18s/it]
 54%|#####4    | 274/506 [05:24&lt;04:33,  1.18s/it]
 54%|#####4    | 275/506 [05:25&lt;04:36,  1.20s/it]
 55%|#####4    | 276/506 [05:26&lt;04:33,  1.19s/it]
 55%|#####4    | 277/506 [05:27&lt;04:29,  1.18s/it]
 55%|#####4    | 278/506 [05:28&lt;04:28,  1.18s/it]
 55%|#####5    | 279/506 [05:29&lt;04:29,  1.19s/it]
 55%|#####5    | 280/506 [05:31&lt;04:25,  1.17s/it]
 56%|#####5    | 281/506 [05:32&lt;04:17,  1.15s/it]
 56%|#####5    | 282/506 [05:33&lt;04:16,  1.14s/it]
 56%|#####5    | 283/506 [05:34&lt;04:15,  1.14s/it]
 56%|#####6    | 284/506 [05:35&lt;04:12,  1.14s/it]
 56%|#####6    | 285/506 [05:36&lt;04:13,  1.15s/it]
 57%|#####6    | 286/506 [05:37&lt;04:13,  1.15s/it]
 57%|#####6    | 287/506 [05:39&lt;04:12,  1.15s/it]
 57%|#####6    | 288/506 [05:40&lt;04:13,  1.16s/it]
 57%|#####7    | 289/506 [05:41&lt;04:12,  1.16s/it]
 57%|#####7    | 290/506 [05:42&lt;04:14,  1.18s/it]
 58%|#####7    | 291/506 [05:43&lt;04:12,  1.17s/it]
 58%|#####7    | 292/506 [05:44&lt;04:08,  1.16s/it]
 58%|#####7    | 293/506 [05:46&lt;04:06,  1.16s/it]
 58%|#####8    | 294/506 [05:47&lt;04:06,  1.16s/it]
 58%|#####8    | 295/506 [05:48&lt;04:06,  1.17s/it]
 58%|#####8    | 296/506 [05:49&lt;04:05,  1.17s/it]
 59%|#####8    | 297/506 [05:50&lt;04:04,  1.17s/it]
 59%|#####8    | 298/506 [05:51&lt;04:03,  1.17s/it]
 59%|#####9    | 299/506 [05:53&lt;04:03,  1.18s/it]
 59%|#####9    | 300/506 [05:54&lt;03:59,  1.16s/it]
 59%|#####9    | 301/506 [05:55&lt;03:59,  1.17s/it]
 60%|#####9    | 302/506 [05:56&lt;04:02,  1.19s/it]
 60%|#####9    | 303/506 [05:57&lt;04:05,  1.21s/it]
 60%|######    | 304/506 [05:59&lt;04:01,  1.20s/it]
 60%|######    | 305/506 [06:00&lt;03:56,  1.18s/it]
 60%|######    | 306/506 [06:01&lt;03:54,  1.17s/it]
 61%|######    | 307/506 [06:02&lt;03:54,  1.18s/it]
 61%|######    | 308/506 [06:03&lt;03:53,  1.18s/it]
 61%|######1   | 309/506 [06:04&lt;03:49,  1.17s/it]
 61%|######1   | 310/506 [06:06&lt;03:49,  1.17s/it]
 61%|######1   | 311/506 [06:07&lt;03:49,  1.18s/it]
 62%|######1   | 312/506 [06:08&lt;03:46,  1.17s/it]
 62%|######1   | 313/506 [06:09&lt;03:47,  1.18s/it]
 62%|######2   | 314/506 [06:10&lt;03:47,  1.19s/it]
 62%|######2   | 315/506 [06:12&lt;03:46,  1.18s/it]
 62%|######2   | 316/506 [06:13&lt;03:56,  1.25s/it]
 63%|######2   | 317/506 [06:14&lt;03:58,  1.26s/it]
 63%|######2   | 318/506 [06:15&lt;03:51,  1.23s/it]
 63%|######3   | 319/506 [06:17&lt;03:46,  1.21s/it]
 63%|######3   | 320/506 [06:18&lt;03:45,  1.22s/it]
 63%|######3   | 321/506 [06:19&lt;03:42,  1.20s/it]
 64%|######3   | 322/506 [06:20&lt;03:38,  1.19s/it]
 64%|######3   | 323/506 [06:21&lt;03:40,  1.20s/it]
 64%|######4   | 324/506 [06:23&lt;03:43,  1.23s/it]
 64%|######4   | 325/506 [06:24&lt;03:40,  1.22s/it]
 64%|######4   | 326/506 [06:25&lt;03:40,  1.23s/it]
 65%|######4   | 327/506 [06:26&lt;03:39,  1.23s/it]
 65%|######4   | 328/506 [06:28&lt;03:43,  1.26s/it]
 65%|######5   | 329/506 [06:29&lt;03:37,  1.23s/it]
 65%|######5   | 330/506 [06:30&lt;03:33,  1.21s/it]
 65%|######5   | 331/506 [06:31&lt;03:29,  1.20s/it]
 66%|######5   | 332/506 [06:32&lt;03:29,  1.20s/it]
 66%|######5   | 333/506 [06:34&lt;03:27,  1.20s/it]
 66%|######6   | 334/506 [06:35&lt;03:22,  1.18s/it]
 66%|######6   | 335/506 [06:36&lt;03:19,  1.17s/it]
 66%|######6   | 336/506 [06:37&lt;03:18,  1.17s/it]
 67%|######6   | 337/506 [06:38&lt;03:15,  1.16s/it]
 67%|######6   | 338/506 [06:39&lt;03:14,  1.16s/it]
 67%|######6   | 339/506 [06:40&lt;03:11,  1.15s/it]
 67%|######7   | 340/506 [06:42&lt;03:20,  1.21s/it]
 67%|######7   | 341/506 [06:43&lt;03:29,  1.27s/it]
 68%|######7   | 342/506 [06:45&lt;03:35,  1.32s/it]
 68%|######7   | 343/506 [06:46&lt;03:36,  1.33s/it]
 68%|######7   | 344/506 [06:47&lt;03:35,  1.33s/it]
 68%|######8   | 345/506 [06:49&lt;04:00,  1.49s/it]
 68%|######8   | 346/506 [06:51&lt;04:21,  1.63s/it]
 69%|######8   | 347/506 [06:53&lt;04:12,  1.59s/it]
 69%|######8   | 348/506 [06:54&lt;04:02,  1.53s/it]
 69%|######8   | 349/506 [06:55&lt;03:50,  1.47s/it]
 69%|######9   | 350/506 [06:57&lt;03:42,  1.42s/it]
 69%|######9   | 351/506 [06:58&lt;03:29,  1.35s/it]
 70%|######9   | 352/506 [06:59&lt;03:22,  1.31s/it]
 70%|######9   | 353/506 [07:00&lt;03:23,  1.33s/it]
 70%|######9   | 354/506 [07:02&lt;03:18,  1.31s/it]
 70%|#######   | 355/506 [07:03&lt;03:17,  1.31s/it]
 70%|#######   | 356/506 [07:04&lt;03:19,  1.33s/it]
 71%|#######   | 357/506 [07:06&lt;03:38,  1.47s/it]
 71%|#######   | 358/506 [07:08&lt;04:06,  1.66s/it]
 71%|#######   | 359/506 [07:10&lt;03:47,  1.55s/it]
 71%|#######1  | 360/506 [07:11&lt;03:37,  1.49s/it]
 71%|#######1  | 361/506 [07:12&lt;03:24,  1.41s/it]
 72%|#######1  | 362/506 [07:13&lt;03:16,  1.37s/it]
 72%|#######1  | 363/506 [07:15&lt;03:14,  1.36s/it]
 72%|#######1  | 364/506 [07:16&lt;03:11,  1.35s/it]
 72%|#######2  | 365/506 [07:17&lt;03:05,  1.32s/it]
 72%|#######2  | 366/506 [07:19&lt;03:04,  1.32s/it]
 73%|#######2  | 367/506 [07:20&lt;03:07,  1.35s/it]
 73%|#######2  | 368/506 [07:21&lt;03:00,  1.31s/it]
 73%|#######2  | 369/506 [07:22&lt;02:50,  1.25s/it]
 73%|#######3  | 370/506 [07:24&lt;02:47,  1.23s/it]
 73%|#######3  | 371/506 [07:25&lt;02:38,  1.18s/it]
 74%|#######3  | 372/506 [07:26&lt;02:36,  1.17s/it]
 74%|#######3  | 373/506 [07:27&lt;02:30,  1.14s/it]
 74%|#######3  | 374/506 [07:28&lt;02:28,  1.13s/it]
 74%|#######4  | 375/506 [07:29&lt;02:28,  1.14s/it]
 74%|#######4  | 376/506 [07:30&lt;02:28,  1.14s/it]
 75%|#######4  | 377/506 [07:31&lt;02:26,  1.14s/it]
 75%|#######4  | 378/506 [07:32&lt;02:26,  1.14s/it]
 75%|#######4  | 379/506 [07:34&lt;02:25,  1.15s/it]
 75%|#######5  | 380/506 [07:35&lt;02:28,  1.18s/it]
 75%|#######5  | 381/506 [07:36&lt;02:29,  1.20s/it]
 75%|#######5  | 382/506 [07:37&lt;02:28,  1.20s/it]
 76%|#######5  | 383/506 [07:39&lt;02:26,  1.19s/it]
 76%|#######5  | 384/506 [07:40&lt;02:25,  1.19s/it]
 76%|#######6  | 385/506 [07:41&lt;02:25,  1.20s/it]
 76%|#######6  | 386/506 [07:42&lt;02:23,  1.20s/it]
 76%|#######6  | 387/506 [07:43&lt;02:22,  1.19s/it]
 77%|#######6  | 388/506 [07:44&lt;02:19,  1.18s/it]
 77%|#######6  | 389/506 [07:46&lt;02:20,  1.20s/it]
 77%|#######7  | 390/506 [07:47&lt;02:19,  1.20s/it]
 77%|#######7  | 391/506 [07:48&lt;02:17,  1.20s/it]
 77%|#######7  | 392/506 [07:49&lt;02:16,  1.19s/it]
 78%|#######7  | 393/506 [07:51&lt;02:16,  1.21s/it]
 78%|#######7  | 394/506 [07:52&lt;02:14,  1.20s/it]
 78%|#######8  | 395/506 [07:53&lt;02:12,  1.19s/it]
 78%|#######8  | 396/506 [07:54&lt;02:11,  1.19s/it]
 78%|#######8  | 397/506 [07:55&lt;02:10,  1.20s/it]
 79%|#######8  | 398/506 [07:56&lt;02:07,  1.18s/it]
 79%|#######8  | 399/506 [07:58&lt;02:04,  1.16s/it]
 79%|#######9  | 400/506 [07:59&lt;02:02,  1.15s/it]
 79%|#######9  | 401/506 [08:00&lt;02:00,  1.15s/it]
 79%|#######9  | 402/506 [08:01&lt;02:01,  1.16s/it]
 80%|#######9  | 403/506 [08:02&lt;02:01,  1.18s/it]
 80%|#######9  | 404/506 [08:03&lt;02:01,  1.19s/it]
 80%|########  | 405/506 [08:05&lt;01:58,  1.18s/it]
 80%|########  | 406/506 [08:06&lt;01:56,  1.17s/it]
 80%|########  | 407/506 [08:07&lt;01:53,  1.15s/it]
 81%|########  | 408/506 [08:08&lt;01:51,  1.14s/it]
 81%|########  | 409/506 [08:09&lt;01:49,  1.13s/it]
 81%|########1 | 410/506 [08:10&lt;01:47,  1.12s/it]
 81%|########1 | 411/506 [08:11&lt;01:46,  1.12s/it]
 81%|########1 | 412/506 [08:12&lt;01:45,  1.13s/it]
 82%|########1 | 413/506 [08:14&lt;01:44,  1.13s/it]
 82%|########1 | 414/506 [08:15&lt;01:44,  1.14s/it]
 82%|########2 | 415/506 [08:16&lt;01:44,  1.15s/it]
 82%|########2 | 416/506 [08:17&lt;01:43,  1.15s/it]
 82%|########2 | 417/506 [08:18&lt;01:42,  1.15s/it]
 83%|########2 | 418/506 [08:19&lt;01:42,  1.17s/it]
 83%|########2 | 419/506 [08:21&lt;01:42,  1.17s/it]
 83%|########3 | 420/506 [08:22&lt;01:39,  1.16s/it]
 83%|########3 | 421/506 [08:23&lt;01:38,  1.15s/it]
 83%|########3 | 422/506 [08:24&lt;01:37,  1.16s/it]
 84%|########3 | 423/506 [08:25&lt;01:37,  1.17s/it]
 84%|########3 | 424/506 [08:26&lt;01:38,  1.20s/it]
 84%|########3 | 425/506 [08:28&lt;01:35,  1.18s/it]
 84%|########4 | 426/506 [08:29&lt;01:33,  1.17s/it]
 84%|########4 | 427/506 [08:30&lt;01:32,  1.17s/it]
 85%|########4 | 428/506 [08:31&lt;01:31,  1.17s/it]
 85%|########4 | 429/506 [08:32&lt;01:29,  1.16s/it]
 85%|########4 | 430/506 [08:33&lt;01:28,  1.16s/it]
 85%|########5 | 431/506 [08:35&lt;01:27,  1.16s/it]
 85%|########5 | 432/506 [08:36&lt;01:26,  1.17s/it]
 86%|########5 | 433/506 [08:37&lt;01:25,  1.17s/it]
 86%|########5 | 434/506 [08:38&lt;01:24,  1.17s/it]
 86%|########5 | 435/506 [08:39&lt;01:23,  1.18s/it]
 86%|########6 | 436/506 [08:40&lt;01:21,  1.17s/it]
 86%|########6 | 437/506 [08:42&lt;01:20,  1.17s/it]
 87%|########6 | 438/506 [08:43&lt;01:20,  1.18s/it]
 87%|########6 | 439/506 [08:44&lt;01:18,  1.17s/it]
 87%|########6 | 440/506 [08:45&lt;01:17,  1.18s/it]
 87%|########7 | 441/506 [08:46&lt;01:16,  1.17s/it]
 87%|########7 | 442/506 [08:47&lt;01:14,  1.17s/it]
 88%|########7 | 443/506 [08:49&lt;01:13,  1.16s/it]
 88%|########7 | 444/506 [08:50&lt;01:13,  1.18s/it]
 88%|########7 | 445/506 [08:51&lt;01:11,  1.17s/it]
 88%|########8 | 446/506 [08:52&lt;01:10,  1.17s/it]
 88%|########8 | 447/506 [08:53&lt;01:08,  1.17s/it]
 89%|########8 | 448/506 [08:54&lt;01:07,  1.16s/it]
 89%|########8 | 449/506 [08:56&lt;01:06,  1.17s/it]
 89%|########8 | 450/506 [08:57&lt;01:05,  1.17s/it]
 89%|########9 | 451/506 [08:58&lt;01:04,  1.17s/it]
 89%|########9 | 452/506 [08:59&lt;01:02,  1.17s/it]
 90%|########9 | 453/506 [09:00&lt;01:01,  1.17s/it]
 90%|########9 | 454/506 [09:01&lt;00:59,  1.14s/it]
 90%|########9 | 455/506 [09:03&lt;00:58,  1.14s/it]
 90%|######### | 456/506 [09:04&lt;00:57,  1.15s/it]
 90%|######### | 457/506 [09:05&lt;00:57,  1.16s/it]
 91%|######### | 458/506 [09:06&lt;00:55,  1.16s/it]
 91%|######### | 459/506 [09:07&lt;00:55,  1.17s/it]
 91%|######### | 460/506 [09:08&lt;00:54,  1.18s/it]
 91%|#########1| 461/506 [09:10&lt;00:53,  1.18s/it]
 91%|#########1| 462/506 [09:11&lt;00:52,  1.18s/it]
 92%|#########1| 463/506 [09:12&lt;00:51,  1.20s/it]
 92%|#########1| 464/506 [09:13&lt;00:50,  1.21s/it]
 92%|#########1| 465/506 [09:15&lt;00:50,  1.23s/it]
 92%|#########2| 466/506 [09:16&lt;00:48,  1.22s/it]
 92%|#########2| 467/506 [09:17&lt;00:47,  1.21s/it]
 92%|#########2| 468/506 [09:18&lt;00:46,  1.22s/it]
 93%|#########2| 469/506 [09:19&lt;00:44,  1.20s/it]
 93%|#########2| 470/506 [09:21&lt;00:42,  1.19s/it]
 93%|#########3| 471/506 [09:22&lt;00:41,  1.18s/it]
 93%|#########3| 472/506 [09:23&lt;00:40,  1.19s/it]
 93%|#########3| 473/506 [09:24&lt;00:39,  1.19s/it]
 94%|#########3| 474/506 [09:25&lt;00:37,  1.17s/it]
 94%|#########3| 475/506 [09:26&lt;00:36,  1.18s/it]
 94%|#########4| 476/506 [09:28&lt;00:35,  1.18s/it]
 94%|#########4| 477/506 [09:29&lt;00:34,  1.20s/it]
 94%|#########4| 478/506 [09:30&lt;00:33,  1.19s/it]
 95%|#########4| 479/506 [09:31&lt;00:32,  1.20s/it]
 95%|#########4| 480/506 [09:32&lt;00:31,  1.20s/it]
 95%|#########5| 481/506 [09:34&lt;00:30,  1.21s/it]
 95%|#########5| 482/506 [09:35&lt;00:28,  1.19s/it]
 95%|#########5| 483/506 [09:36&lt;00:26,  1.17s/it]
 96%|#########5| 484/506 [09:37&lt;00:25,  1.18s/it]
 96%|#########5| 485/506 [09:38&lt;00:24,  1.19s/it]
 96%|#########6| 486/506 [09:40&lt;00:23,  1.19s/it]
 96%|#########6| 487/506 [09:41&lt;00:22,  1.18s/it]
 96%|#########6| 488/506 [09:42&lt;00:21,  1.18s/it]
 97%|#########6| 489/506 [09:43&lt;00:20,  1.19s/it]
 97%|#########6| 490/506 [09:44&lt;00:18,  1.17s/it]
 97%|#########7| 491/506 [09:45&lt;00:17,  1.17s/it]
 97%|#########7| 492/506 [09:47&lt;00:16,  1.16s/it]
 97%|#########7| 493/506 [09:48&lt;00:15,  1.17s/it]
 98%|#########7| 494/506 [09:49&lt;00:14,  1.19s/it]
 98%|#########7| 495/506 [09:50&lt;00:13,  1.19s/it]
 98%|#########8| 496/506 [09:51&lt;00:11,  1.19s/it]
 98%|#########8| 497/506 [09:53&lt;00:10,  1.18s/it]
 98%|#########8| 498/506 [09:54&lt;00:09,  1.19s/it]
 99%|#########8| 499/506 [09:55&lt;00:08,  1.19s/it]
 99%|#########8| 500/506 [09:56&lt;00:07,  1.18s/it]
 99%|#########9| 501/506 [09:57&lt;00:05,  1.19s/it]
 99%|#########9| 502/506 [09:58&lt;00:04,  1.18s/it]
 99%|#########9| 503/506 [10:00&lt;00:03,  1.19s/it]
100%|#########9| 504/506 [10:01&lt;00:02,  1.17s/it]
100%|#########9| 505/506 [10:02&lt;00:01,  1.17s/it]
100%|##########| 506/506 [10:03&lt;00:00,  1.20s/it]</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb19-1" data-line-number="1">end <span class="op">=</span> time.time()</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">t2 <span class="op">=</span> end <span class="op">-</span> start  <span class="co"># ~ computatiom time</span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3"></a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="co"># Print results</span></a>
<a class="sourceLine" id="cb19-5" data-line-number="5">res_shap_samp<span class="op">=</span>pd.DataFrame(res_shap_samp, columns<span class="op">=</span>X.columns)</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">res_shap_tree<span class="op">=</span>pd.DataFrame(res_shap_tree, columns<span class="op">=</span>X.columns)</a></code></pre></div>
<p>For completion and fair comparison, we’ll create another prediction wrapper so that we can compute ApproxSHAP values for the <strong>scikit-learn</strong> (<strong>sklearn</strong>) random forest regressor using the <a href="https://github.com/bgreenwell/fastshap">fastshap</a> package:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="co"># Comput ApproxSHAP values</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">625</span>)  <span class="co"># for reproducibility</span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3">t2 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span>(  <span class="co"># time the results</span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4">  res_fastshap_sklearn &lt;-<span class="st"> </span><span class="kw"><a href="../reference/explain.html">explain</a></span>(</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">    <span class="dt">object =</span> py<span class="op">$</span>rfo, </a>
<a class="sourceLine" id="cb20-6" data-line-number="6">    <span class="dt">X =</span> X, </a>
<a class="sourceLine" id="cb20-7" data-line-number="7">    <span class="dt">nsim =</span> <span class="dv">100</span>, </a>
<a class="sourceLine" id="cb20-8" data-line-number="8">    <span class="dt">pred_wrapper =</span> <span class="cf">function</span>(object, newdata) {</a>
<a class="sourceLine" id="cb20-9" data-line-number="9">      py<span class="op">$</span>rfo<span class="op">$</span><span class="kw"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(newdata)</a>
<a class="sourceLine" id="cb20-10" data-line-number="10">    }</a>
<a class="sourceLine" id="cb20-11" data-line-number="11">  )</a>
<a class="sourceLine" id="cb20-12" data-line-number="12">)</a></code></pre></div>
<p>In the figure below we plot the resulting Shapley values against <code>lstat</code> for each implementation (which two plots look most alike?). The ApproxSHAP results from <a href="https://github.com/slundberg/shap">shap</a> displays more variability than the other plots do. This is likely due to the fact that <code>shap.SamplingExplainer()</code> distributed far less than <code>nsmaples=100</code> Monte Carlo repetitions to the computation of the ApproxSHAP values for <code>lstat</code>; hence it is difficult to know how long it would actually take for <code>shap.SamplingExplainer()</code> to compute <span class="math inline">\(B = 100\)</span> Monte Carlo repetitions in this example.</p>
<div class="figure" style="text-align: left">
<img src="fastshap-vs-shap_files/figure-html/r-plot-results-1.png" alt="**Figure 2** SHAP dependence plots for `lstat` using all four implementations." width="100%"><p class="caption">
<strong>Figure 2</strong> SHAP dependence plots for <code>lstat</code> using all four implementations.
</p>
</div>
<div id="refs" class="references">
<div id="ref-lundberg-2019-explainable">
<p>Lundberg, Scott M, Gabriel Erion, Hugh Chen, Alex DeGrave, Jordan M Prutkin, Bala Nair, Ronit Katz, Jonathan Himmelfarb, Nisha Bansal, and Su-In Lee. 2019. “Explainable Ai for Trees: From Local Explanations to Global Understanding.” <em>arXiv Preprint arXiv:1905.04610</em>.</p>
</div>
<div id="ref-strumbelj-2014-explaining">
<p>Štrumbelj, Erik, and Igor Kononenko. 2014. “Explaining Prediction Models and Individual Predictions with Feature Contributions.” <em>Knowledge and Information Systems</em> 41 (3): 647–65. <a href="https://doi.org/10.1007/s10115-013-0679-x">https://doi.org/10.1007/s10115-013-0679-x</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#tldr">TL;DR</a></li>
      <li><a href="#fastshap">fastshap</a></li>
      <li><a href="#shap">shap</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Brandon Greenwell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
